(()=>{"use strict";var e=document.querySelector('form[name="editForm"]'),t=document.querySelector('form[name="addForm"]'),n=document.querySelector('input[name="name"]'),r=document.querySelector('input[name="job"]'),o=(document.querySelector('input[name="title"]'),document.querySelector('input[name="link"]'),document.querySelector(".profile__title")),i=document.querySelector(".profile__subtitle"),u=document.querySelector(".profile__edit-btn"),a=document.querySelector(".profile__add-btn"),l=document.querySelector(".popup_add"),c=document.querySelector(".popup_edit"),s=document.querySelector(".cards__container"),f=document.querySelector("#card").content,p=document.querySelector(".popup_image-scale"),y=document.querySelector(".popup__image"),m=document.querySelector(".popup__subtitle"),d=(p.querySelector(".popup__close-btn"),l.querySelector(".popup__close-btn"),c.querySelector(".popup__close-btn"),l.querySelector(".popup__btn-add"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error"});function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._imgLink=t.imgLink,this._name=t.name,this._templateSelector=n,this._cardElement=this._getTemplate(),this._photoElement=this._cardElement.querySelector(".cards__photo"),this._handleCardElement=r,this._likeButton=this._cardElement.querySelector(".cards__like"),this._deleteButton=this._cardElement.querySelector(".cards__btn-remove")}var t,n;return t=e,n=[{key:"_getTemplate",value:function(){return this._templateSelector.querySelector(".cards__item").cloneNode(!0)}},{key:"generateCard",value:function(){return this._setEventListeners(),this._photoElement.src=this._imgLink,this._cardElement.querySelector(".cards__title").textContent=this._name,this._photoElement.alt=this._name,this._cardElement}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(){return e._deleteCard(e._cardElement)})),this._photoElement.addEventListener("click",(function(){return e._handleCardElement()})),this._likeButton.addEventListener("click",this._handleLikeIcon,!1)}},{key:"_deleteCard",value:function(e){e.remove()}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("cards__like-active")}}],n&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var E=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._form=n,this._submitButtonElement=n.querySelector(this._submitButtonSelector),this._inputList=this._form.querySelectorAll(this._inputSelector)}var t,n;return t=e,(n=[{key:"_toggleButtonState",value:function(e){e?this._enabledButton():this.disabledButton()}},{key:"disabledButton",value:function(){this._submitButtonElement.disabled="disabled",this._submitButtonElement.classList.add(this._inactiveButtonClass)}},{key:"_enabledButton",value:function(){this._submitButtonElement.disabled=!1,this._submitButtonElement.classList.remove(this._inactiveButtonClass)}},{key:"enableValidation",value:function(){var e,t=this;(e=this._inputList,function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e.addEventListener("input",(function(){var n=t._form.checkValidity();t._toggleButtonState(n),t._checkInputValidity(e,t._form)}))})),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._form.checkValidity()}))}},{key:"_checkInputValidity",value:function(e){var t=e.validity.valid,n=this._form.querySelector("#".concat(e.name,"-error"));t?this._hideError(e,n):this._showError(e,n)}},{key:"_showError",value:function(e,t){e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage}},{key:"_hideError",value:function(e,t){e.classList.remove(this._inputErrorClass),t.textContent=""}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){var n=e._form.querySelector("#".concat(t.name,"-error"));e._hideError(t,n)}))}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cards=t.items,this._renderCard=t.render,this._container=n}var t,n;return t=e,n=[{key:"renderCards",value:function(){var e=this;window.addEventListener("load",(function(){e._cards.forEach((function(t){e._renderCard(t)}))}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}],n&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===P(t)?t:String(t)}var L=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(e){"Escape"===e.key&&i.onPopupClose()},(r=C(r="_keyDownHandler"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=t}var t,n;return t=e,(n=[{key:"onPopupOpen",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._keyDownHandler,!0)}},{key:"onPopupClose",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._keyDownHandler,!0)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close-btn"))&&e.onPopupClose()}))}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},R.apply(this,arguments)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function V(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===q(t)?t:String(t)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,e)});function u(e,t,n){var r,o,a,l,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a=x(o=i.call(this,e)),c=function(){R((r=x(o),I(u.prototype)),"setEventListeners",r).call(r),o._formElement.addEventListener("submit",(function(e){e.preventDefault(),o._handleSubmit(o._getInputValues()),o.onPopupClose()}))},(l=V(l="setEventListeners"))in a?Object.defineProperty(a,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[l]=c,o._handleSubmit=t,o._formElement=n,o._formList=Array.from(o._popup.querySelectorAll(".popup__input")),o}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._formList.forEach((function(t){e[t.name]=t.value})),e}},{key:"onPopupClose",value:function(){R(I(u.prototype),"onPopupClose",this).call(this),this._formElement.reset()}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(L);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}var H=function(){function e(t){var n=t.nameElement,r=t.jobElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=n,this._jobElement=r}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){this._nameElement.textContent=e.name.trim(),this._jobElement.textContent=e.job.trim()}}],n&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===F(o)?o:String(o)),r)}var o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},z.apply(this,arguments)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(r);if(o){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,e)}return t=u,(n=[{key:"onPopupOpen",value:function(e,t){t.image.src=e.imgLink,t.image.alt="Изображение ".concat(e.name),t.subtitle.textContent=e.name,z($(u.prototype),"onPopupOpen",this).call(this)}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(L),J=new j({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],render:function(e){var t=te(e);J.addItem(t)}},s),K=new E(d,t),Q=new E(d,e),W=new D(c,(function(e){Z.setUserInfo(e),ee(e),W.onPopupClose()}),e),X=new D(l,(function(e){var t=te({link:e.link,name:e.title});J.addItem(t),X.onPopupOpen()}),t),Y=new G(p);W.setEventListeners(),X.setEventListeners(),Y.setEventListeners(),K.enableValidation(),Q.enableValidation(),K.disabledButton(),J.renderCards();var Z=new H({nameElement:o,jobElement:i});function ee(e){n.value=e.name,r.value=e.job}var te=function(e){return new h({imgLink:e.link,name:e.name},f,(function(){return t=e,void Y.onPopupOpen({imgLink:t.link,name:t.name},{image:y,subtitle:m});var t})).generateCard()};a.addEventListener("click",(function(e){e.preventDefault(),K.resetValidation(),X.onPopupOpen(),K.disabledButton()})),u.addEventListener("click",(function(e){e.preventDefault(),Q.resetValidation(),W.onPopupOpen(),ee(Z.getUserInfo())}))})();